{"version":3,"sources":["../src/extractLocale.js"],"names":["extractLocaleOrNull","resourcePath","localeInterpolate","value","re","result","match","toString","EXTRACTORS","loaderContext","options","locale","defaultLocale","extractor","extractedLocale"],"mappings":";;;;;;;;;;AAAA;;AAKA;;;;;;AAEA;;;;;;AAMA,IAAMA,sBAAsB,SAAtBA,mBAAsB,CAACC,YAAD,EAAeC,iBAAf,EAAqC;AAC7D,QAAIC,QAAQ,IAAZ;;AAD6D;AAAA;AAAA;;AAAA;AAG7D,wDAAiBD,iBAAjB,4GAAoC;AAAA,gBAAzBE,EAAyB;;AAChC,gBAAMC,SAASJ,aAAaK,KAAb,CAAmBF,EAAnB,CAAf;;AAEA,gBAAIC,WAAW,IAAf,EAAqB;AACjBF,wBAAQE,OAAOE,QAAP,EAAR;AACA;AACH;AACJ;AAV4D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAY7D,WAAOJ,KAAP;AACH,CAbD;;AAeA;;;;AAIA;AACA,IAAMK,aAAa;AACf;;;;;AAKA,UAACP,YAAD,EAAeC,iBAAf;AAAA,WAAqCF,oBAAoB,oBAASC,YAAT,CAApB,EAA4CC,iBAA5C,CAArC;AAAA,CANe;;AAQf;;;;;AAKA,UAACD,YAAD,EAAeC,iBAAf;AAAA,WAAqCF,oBAAoB,mBAAQC,YAAR,aAApB,EAAiDC,iBAAjD,CAArC;AAAA,CAbe,CAAnB;;AAgBA;;;;;;kBAKe,UAACO,aAAD,EAAgBC,OAAhB,EAA4B;AACvC,QAAIC,SAASD,QAAQE,aAArB;;AADuC;AAAA;AAAA;;AAAA;AAGvC,yDAAwBJ,UAAxB,iHAAoC;AAAA,gBAAzBK,SAAyB;;AAChC,gBAAMC,kBAAkBD,UAAUJ,cAAcR,YAAxB,EAAsCS,QAAQR,iBAA9C,CAAxB;;AAEA,gBAAIY,oBAAoB,IAAxB,EAA8B;AAC1BH,yBAASG,eAAT;AACA;AACH;AACJ;AAVsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAYvC,WAAO,+BAAgBH,MAAhB,CAAP;AACH,C","file":"extractLocale.js","sourcesContent":["import {\n    basename,\n    dirname,\n    sep\n} from 'path';\nimport normalizeLocale from './normalizeLocale';\n\n/**\n * @private\n * @param {String} resourcePath\n * @param {RegExp[]} localeInterpolate\n * @returns {String}\n */\nconst extractLocaleOrNull = (resourcePath, localeInterpolate) => {\n    let value = null;\n\n    for (const re of localeInterpolate) {\n        const result = resourcePath.match(re);\n\n        if (result !== null) {\n            value = result.toString();\n            break;\n        }\n    }\n\n    return value;\n};\n\n/**\n * @private\n * @type {Function[]}\n */\n// eslint-disable-line valid-jsdoc\nconst EXTRACTORS = [\n    /**\n     * @param {String} resourcePath\n     * @param {RegExp[]} localeInterpolate\n     * @returns {String}\n     */\n    (resourcePath, localeInterpolate) => extractLocaleOrNull(basename(resourcePath), localeInterpolate),\n\n    /**\n     * @param {String} resourcePath\n     * @param {RegExp[]} localeInterpolate\n     * @returns {String}\n     */\n    (resourcePath, localeInterpolate) => extractLocaleOrNull(dirname(resourcePath) + sep, localeInterpolate)\n];\n\n/**\n * @param {*} loaderContext\n * @param {Object} options\n * @returns {String}\n */\nexport default (loaderContext, options) => {\n    let locale = options.defaultLocale;\n\n    for (const extractor of EXTRACTORS) {\n        const extractedLocale = extractor(loaderContext.resourcePath, options.localeInterpolate);\n\n        if (extractedLocale !== null) {\n            locale = extractedLocale;\n            break;\n        }\n    }\n\n    return normalizeLocale(locale);\n};\n"]}